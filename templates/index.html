<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨ Whimsical Photobooth ✨</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <!-- Floating bubbles background -->
    <div class="bubbles">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>

    <!-- Header -->
    <header class="app-header">
        <h1 class="logo">
            <span class="camera-icon">📸</span>
            <span class="logo-text">Whimsical Booth</span>
            <span class="sparkle">✨</span>
        </h1>
        <div class="session-info">
            <span id="sessionId">Session: New</span>
            <button id="newSession" class="btn btn-ghost">🔄 New Session</button>
        </div>
    </header>

    <!-- Main container -->
    <div class="container">
        <!-- Left Panel - Camera & Upload -->
        <div class="panel camera-panel">
            <div class="panel-header">
                <h2>📷 Capture Magic</h2>
            </div>
            
            <!-- Camera/Upload Section -->
            <div class="capture-section">
                <div class="camera-preview" id="cameraPreview">
                    <video id="video" autoplay playsinline></video>
                    <canvas id="canvas" style="display: none;"></canvas>
                    <div class="camera-overlay">
                        <div class="viewfinder"></div>
                    </div>
                </div>
                
                <div class="capture-controls">
                    <button id="startCamera" class="btn btn-primary">📹 Start Camera</button>
                    <button id="capturePhoto" class="btn btn-accent" style="display: none;">📸 Snap!</button>
                    <button id="stopCamera" class="btn btn-secondary" style="display: none;">⏹️ Stop</button>
                </div>
                
                <div class="upload-section">
                    <div class="upload-zone" id="uploadZone">
                        <input type="file" id="fileInput" accept="image/*" multiple>
                        <div class="upload-content">
                            <span class="upload-icon">🖼️</span>
                            <p>Drop images here or click to browse</p>
                            <small>Support multiple files</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fun Stats -->
            <div class="stats-mini">
                <div class="stat-item">
                    <span class="stat-emoji">📊</span>
                    <span>Photos: <span id="photoCount">0</span></span>
                </div>
                <div class="stat-item">
                    <span class="stat-emoji">🎨</span>
                    <span>Filters: <span id="filtersUsed">0</span></span>
                </div>
                <div class="stat-item">
                    <span class="stat-emoji">⚡</span>
                    <span>Strips: <span id="stripsCreated">0</span></span>
                </div>
            </div>
        </div>

        <!-- Center Panel - Preview & Filters -->
        <div class="panel preview-panel">
            <div class="panel-header">
                <h2>🎨 Style Studio</h2>
            </div>
            
            <!-- Image Preview -->
            <div class="image-preview" id="imagePreview">
                <div class="preview-placeholder">
                    <span class="placeholder-icon">🖼️</span>
                    <p>Your masterpiece appears here</p>
                </div>
            </div>
            
            <!-- Filter Controls -->
            <div class="filter-section">
                <h3>✨ Magic Filters</h3>
                <div class="filter-grid">
                    <button class="filter-btn" data-filter="none">
                        <span class="filter-emoji">🌈</span>
                        <span>Original</span>
                    </button>
                    <button class="filter-btn" data-filter="vintage">
                        <span class="filter-emoji">📜</span>
                        <span>Vintage</span>
                    </button>
                    <button class="filter-btn" data-filter="bw">
                        <span class="filter-emoji">⚫</span>
                        <span>B&W</span>
                    </button>
                    <button class="filter-btn" data-filter="blur">
                        <span class="filter-emoji">💫</span>
                        <span>Dreamy</span>
                    </button>
                    <button class="filter-btn" data-filter="enhance">
                        <span class="filter-emoji">✨</span>
                        <span>Vibrant</span>
                    </button>
                    <button class="filter-btn" data-filter="retro">
                        <span class="filter-emoji">🕺</span>
                        <span>Retro</span>
                    </button>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button id="processImage" class="btn btn-primary">🎭 Apply Magic</button>
                <button id="saveImage" class="btn btn-accent">💾 Save Image</button>
                <button id="createStrip" class="btn btn-gradient">🎞️ Make Strip</button>
            </div>
        </div>

        <!-- Right Panel - Gallery & Features -->
        <div class="panel gallery-panel">
            <div class="panel-header">
                <h2>🖼️ Gallery</h2>
                <div class="panel-controls">
                    <button id="refreshGallery" class="btn btn-ghost btn-sm">🔄</button>
                    <button id="clearGallery" class="btn btn-ghost btn-sm">🗑️</button>
                </div>
            </div>
            
            <!-- Image Gallery -->
            <div class="gallery-grid" id="galleryGrid">
                <!-- Images will be populated here -->
            </div>
            
            <!-- Fun Features -->
            <div class="fun-features">
                <div class="feature-tabs">
                    <button class="tab-btn active" data-tab="templates">🎨 Templates</button>
                    <button class="tab-btn" data-tab="frames">🖼️ Frames</button>
                    <button class="tab-btn" data-tab="stickers">🎭 Stickers</button>
                </div>
                
                <!-- Templates Tab -->
                <div class="tab-content active" id="templates">
                    <div class="template-grid">
                        <div class="template-item" data-template="collage">
                            <span class="template-emoji">🎨</span>
                            <span>Collage</span>
                        </div>
                        <div class="template-item" data-template="mirror">
                            <span class="template-emoji">🪞</span>
                            <span>Mirror</span>
                        </div>
                        <div class="template-item" data-template="split">
                            <span class="template-emoji">✂️</span>
                            <span>Split</span>
                        </div>
                        <div class="template-item" data-template="grid">
                            <span class="template-emoji">⚏</span>
                            <span>Grid</span>
                        </div>
                    </div>
                </div>
                
                <!-- Frames Tab -->
                <div class="tab-content" id="frames">
                    <div class="frame-grid">
                        <div class="frame-item" data-frame="polaroid">📷 Polaroid</div>
                        <div class="frame-item" data-frame="vintage">🖼️ Vintage</div>
                        <div class="frame-item" data-frame="modern">✨ Modern</div>
                        <div class="frame-item" data-frame="film">🎞️ Film Strip</div>
                    </div>
                </div>
                
                <!-- Stickers Tab -->
                <div class="tab-content" id="stickers">
                    <div class="sticker-grid">
                        <span class="sticker-item" data-sticker="heart">💖</span>
                        <span class="sticker-item" data-sticker="star">⭐</span>
                        <span class="sticker-item" data-sticker="rainbow">🌈</span>
                        <span class="sticker-item" data-sticker="party">🎉</span>
                        <span class="sticker-item" data-sticker="fire">🔥</span>
                        <span class="sticker-item" data-sticker="cool">😎</span>
                        <span class="sticker-item" data-sticker="cute">🥰</span>
                        <span class="sticker-item" data-sticker="sparkle">✨</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Panel - Photo Strip Preview -->
    <div class="strip-preview" id="stripPreview">
        <div class="strip-header">
            <h3>🎞️ Photo Strip Preview</h3>
            <div class="strip-controls">
                <button id="downloadStrip" class="btn btn-accent btn-sm">📥 Download</button>
                <button id="shareStrip" class="btn btn-primary btn-sm">🔗 Share</button>
                <button id="printStrip" class="btn btn-secondary btn-sm">🖨️ Print</button>
            </div>
        </div>
        <div class="strip-container" id="stripContainer">
            <div class="strip-placeholder">
                <span class="strip-emoji">🎞️</span>
                <p>Create your first photo strip!</p>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab-container">
        <button class="fab" id="magicFab">
            <span class="fab-icon">✨</span>
        </button>
        <div class="fab-menu">
            <button class="fab-option" data-action="random-filter">🎲 Random Filter</button>
            <button class="fab-option" data-action="auto-enhance">🔮 Auto Enhance</button>
            <button class="fab-option" data-action="surprise-me">🎉 Surprise Me!</button>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Creating magic... ✨</p>
        </div>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confetti"></canvas>

    <script src="static/script.js"></script>
</body>
</html>